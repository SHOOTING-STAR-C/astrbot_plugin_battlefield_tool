<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <title></title>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bb: 'var(--bg-color)',
                        dynamicBg: 'var(--bg-color)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        body {
            background-color: var(--bg-color);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            font-weight: 400;
            width: 700px;
        }

        h2 {
            font-size: 1.4em;
            font-weight: 700;
            margin: 10px 20px 10px;
            text-align: center;
        }
    </style>
    <style>
        :root {
            --bg-color: {{ background_color }};
        }
    </style>
</head>

<body>
    {% set bg_opacity_map = {
        'bf1': 'bg-opacity-10',
        'bf4': 'bg-opacity-50',
        'bfv': 'bg-opacity-25'
    } %}
    {% set current_bg_opacity_class = bg_opacity_map.get(game, 'bg-opacity-10') %}

    <div class="bg-cover relative" style="background-image: url('{{ banner }}'); height: 310px;">
        <div class="absolute inset-0 bg-gradient-to-b from-dynamicBg/0 via-dynamicBg/10 to-dynamicBg/40"></div>
        <div class="relative z-10 flex flex-col items-center justify-center pt-10 pb-10">
            <img src="{{ d.avatar }}" alt="avatar" class="rounded-lg w-32 h-32 object-cover border-2 border-gray-700" />
            <div class="font-bold text-4xl mt-2">{{ d.user_name }}</div>
            <div class="flex items-center font-semibold text-gray-200 mt-1">
                <img src="{{ d.rank_img }}" width="32px" class="mr-1" />
                等级 {{ d.rank }}
            </div>
            <div class="font-semibold text-gray-200 mt-1">游戏时间：{{ d.hours_played }} h</div>
        </div>
    </div>

    <h2 class="text-white">基本信息</h2>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mx-5 p-4 rounded-lg bg-gray-800 {{ current_bg_opacity_class }}">
        <div class="text-center">
            <div class="text-sm text-yellow-400">击杀</div>
            <div class="text-2xl font-bold font-mono">{{ d.kills }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">K/D</div>
            <div class="text-2xl font-bold font-mono">{{ d.kill_death }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">KPM</div>
            <div class="text-2xl font-bold font-mono">{{ d.kills_per_minute }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">爆头率</div>
            <div class="text-2xl font-bold font-mono">{{ d.headshots }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">命中率</div>
            <div class="text-2xl font-bold font-mono">{{ d.accuracy }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">急救</div>
            <div class="text-2xl font-bold font-mono">{{ d.revives }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">爆头</div>
            <div class="text-2xl font-bold font-mono">{{ d.head_shots_num }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">最远爆头</div>
            <div class="text-2xl font-bold font-mono">{{ d.longest_head_shot }}m</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">胜利场次</div>
            <div class="text-2xl font-bold font-mono">{{ d.wins }}</div>
        </div>
        <div class="text-center">
            <div class="text-sm text-yellow-400">最高连杀</div>
            <div class="text-2xl font-bold font-mono">{{ d.highest_kill_streak }}</div>
        </div>
    </div>

    <h2 class="text-white">武器信息</h2>
    <div class="flex flex-col gap-4 mx-5">
        {% from "weapon_card.html" import weapon_card %}
        {% if weapon_data is not none %}
        {% for weapon in weapon_data %}
        {{ weapon_card(w=weapon,game=game, bg_opacity_class=current_bg_opacity_class) }}
        {% endfor %}
        {% else %}
        <div class="text-center text-slate-400 py-4">暂无武器数据</div>
        {% endif %}
        <div class="text-center text-slate-400 text-sm mt-2">
            使用
            <span class="text-sky-500 font-mono">
                weapons [玩家id],game={{ game }}
            </span>
            查看更多数据
        </div>
    </div>

    <h2 class="text-white">载具信息</h2>
    <div class="flex flex-col gap-4 mx-5">
        {% from "vehicle_card.html" import vehicle_card %}
        {% if vehicle_data is not none %}
        {% for vehicle in vehicle_data %}
        {{ vehicle_card(v=vehicle, game=game, bg_opacity_class=current_bg_opacity_class) }}
        {% endfor %}
        {% else %}
        <div class="text-center text-slate-400 py-4">暂无载具数据</div>
        {% endif %}
        <div class="text-center text-slate-400 text-sm mt-1">
            使用
            <span class="text-sky-500 font-mono">
                vehicles [玩家id],game={{ game }}
            </span>
            查看更多数据
        </div>
    </div>
    <div class="flex flex-col justify-center items-center text-slate-400 py-3">
        <span>powered by astrbot</span>
        <span>数据更新时间：{{ update_time }}</span>
    </div>
</body>

</html>
